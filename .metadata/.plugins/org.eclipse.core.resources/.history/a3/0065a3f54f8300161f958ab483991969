import java.io.IOException;
import java.util.ArrayList;

import net.routee.authentication.RouteeAuthentication;
import net.routee.authentication.RouteeAuthenticationException;
import net.routee.contacts.RouteeContactsException;
import net.routee.messaging.Campaign;
import net.routee.messaging.CampaignResponse;
import net.routee.messaging.RouteeMessagingClient;
import net.routee.messaging.RouteeMessagingException;

public class Test {

  public static void main(String[] args) throws RouteeAuthenticationException, IOException,
      RouteeContactsException, RouteeMessagingException, InterruptedException {

    /*
     * I want to create a scheduled campaign and then delete it. Then I want to track the campaign
     * and make sure that it doesnâ€™t exist anymore.
     */

    // 1) First for authorization, we create Routee Authentication Instance by providing our
    // application id, and secret.

    // Replace Application ID, and Secret with your Routee Account Credentials
    String APPLICATION_ID = "57d40cabe4b0464b9119ba59";
    String APPLICATION_SECRET = "KZrjjtAh5q";
    RouteeAuthentication auth = new RouteeAuthentication(APPLICATION_ID, APPLICATION_SECRET);

    //Create a Campaign Object, and setup the campaign information...
    
    Campaign campaign = new Campaign();
    
    campaign.setFrom("Saad");
    campaign.setBody("Test Campaign");
    ArrayList<String> to = new ArrayList<String>();
    to.add("+923114641539");
    campaign.setScheduledDate("2016-09-25T17:00:00.000Z");
    campaign.setTo(to);
      
    //Setup Routee Messaing Class to Send a Campaign
    
    RouteeMessagingClient client = new RouteeMessagingClient(auth);
    CampaignResponse result = client.sendCampaign(campaign);
    
    //Get campaign Id
    
    System.out.println(result.getTrackingId());
    
    
    Thread.sleep(6000);
    
    //Finally delete the Campaign

    client.deleteScheduledCampaign(result.getTrackingId());
    
    //Now try to retrieve details of the deleted campaign...
    client.retrieveCampaignDetails(result.getTrackingId());
    
  }

}
